# transactional-outbox configuration
one.tomorrow.transactional-outbox.event-source=test
one.tomorrow.transactional-outbox.lock-owner-id=${quarkus.uuid}
one.tomorrow.transactional-outbox.enabled=false

# Use TestContainers for PostgreSQL in tests
quarkus.datasource.db-kind=postgresql
%test.quarkus.datasource.devservices.enabled=true
%test.quarkus.datasource.devservices.db-name=outbox_test
#%test.quarkus.datasource.devservices.port=5432
#%test.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/outbox_test
#%test.quarkus.datasource.username=postgres
#%test.quarkus.datasource.password=postgres

# ensure that we're not using XA
quarkus.datasource.jdbc.transactions=enabled
quarkus.datasource.jdbc.enable-recovery=true
#quarkus.datasource.jdbc.validation-query-sql=select 1
#quarkus.datasource.jdbc.new-connection-sql=select 1
#quarkus.datasource.jdbc.validate-on-borrow=true

# Hibernate ORM configurations
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.mapping.format.global=ignore

# Flyway configurations
%test.quarkus.flyway.migrate-at-start=true
%test.quarkus.flyway.baseline-on-migrate=true

# Kafka DevServices configuration for tests
%test.quarkus.devservices.enabled=true
%test.quarkus.kafka.devservices.enabled=true
%test.quarkus.kafka.devservices.port=9092

%test.quarkus.log.category."one.tomorrow.transactionaloutbox".level=DEBUG

# Optional: specific configuration for the integration test profile
%integration-test.quarkus.datasource.devservices.enabled=true
%integration-test.quarkus.kafka.devservices.enabled=true
